\ProvidesPackage{codespace}

\RequirePackage{xcolor}
\RequirePackage{mdframed}
\RequirePackage{listings,lstautogobble}
\RequirePackage{minted}

% Colors
\colorlet{codebackground}{magenta!10}
\definecolor{codebasic}{RGB}{106,106,106}
\definecolor{codeidentifier}{RGB}{0,0,0}
\definecolor{codecomment}{RGB}{0,136,0}
\definecolor{codestring}{RGB}{187,68,68}
\definecolor{codekeyword}{RGB}{170,34,255}

% Listings fallback
\lstdefinestyle{codeframe}{
  float=H,
  frame=lines,
  backgroundcolor=\color{codebackground},
}
\lstdefinestyle{codestyle}{
  basicstyle=\color{codebasic}\ttfamily,
  identifierstyle=\color{codeidentifier},
  commentstyle=\color{codecomment}\itshape,
  stringstyle=\color{codestring},
  keywordstyle=\color{codekeyword},
  numbers=left,
  numbersep=2pt,
  numberstyle=\tiny,
  autogobble=true,
  breaklines=true,
  showstringspaces=false,
  tabsize=2
}
\lstset{style=codeframe, style=codestyle}

% Minted
\usemintedstyle{emacs}
\setminted{
  linenos=true,
  autogobble=true,
  breaklines=true,
  numbers=left,
  bgcolor=codebackground
}

% mdframed
\mdfsetup{
  backgroundcolor=codebackground,
  roundcorner=4pt,
  linewidth=0.5pt,
  nobreak=false
}

\newenvironment{code}[1]{
  \VerbatimEnvironment
  \begin{mdframed}
    \begin{minted}{#1}
}{
  \end{minted}
  \end{mdframed}
}
